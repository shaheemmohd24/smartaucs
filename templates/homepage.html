<!DOCTYPE html>
<html lang="en">
<head>
    <title>SMART AUCS</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/styles.css"> <!-- Add your custom CSS file for styles -->

    <!-- Include any additional styles or scripts you may need -->
    <style>
        .picture-container {
            margin-top: 73px; /* Adjust margin as needed */
            text-align: center; /* Center the image */
            position: relative; /* Position relative for absolute positioning of the button */
        }

        .picture-container img {
            max-width: 100%; /* Make sure the image is responsive */
            height: auto; /* Maintain the aspect ratio */
            border-radius: 10px; /* Optional: Add border-radius for rounded corners */
        }

        .register-button {
            position: absolute;
            bottom: 130px;
            left: 25px;
            padding: 4px 40px;
            background-color: #5bb450; /* Green color */
            color: white;
            text-decoration: none;
            border-radius: 10px;
            font-size: 1.2em;
        }

        body {
            background-color: white; /* Change the background color to white */
            color: #2c3e50; /* Dark text color */
            margin: 0; /* Reset default margin */
        }

        .top-column {
            height: 40px;
            background-color: #151922; /* black color */
            display: flex;
            justify-content: center;
            align-items: center;
            padding-right: 20px;
        }

        .top-column button {
            margin-left: 10px;
            padding: 8px 16px;
            background-color: #151922; /* Green color */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .container {
            background-color: white; /* Set the background color to white */
            color: #2c3e50; /* Dark text color */
            border-radius: 5px; /* Optional: Add rounded corners to the container */
            padding: 20px; /* Optional: Add padding to the container */
            position: relative; /* Relative positioning for child elements */
            top: 10px; /* Move everything down by 10px */
        }

        .page-heading {
            text-align: left; /* Align the heading to the left */
            margin: 10px 0; /* Adjust margin for spacing below the top-left corner */
            font-size: 1.5em; /* Adjust the font size as needed */
            position: absolute; /* Position the heading absolutely within the container */
            top: 10px; /* Adjust top position for alignment below the top-left corner */
            left: 10px; /* Align to the left */
        }

        .page-heading span {
            color: #2c3e50; /* Dark text color */
            font-weight: bold;
        }

        .page-heading span.red {
            color: #28a745; /* Green color */
        }

        .login-button {
            position: absolute;
            top: 19px;
            right: 10px;
            padding: 8px 16px;
            background-color: #28a745; /* Green color */
            color: white;
            text-decoration: none;
            border-radius: 100px;
            font-size: 0.8em;
        }

        .search-bar {
            position: absolute;
            top: 17px;
            right: 22%;
        }

        .search-bar input {
            padding: 5px;
            border: 1px solid #bdc3c7;
            border-radius: 25px;
            width: 600px;
            background-color: #f5f5f5;
        }

        .category-container {
            margin-top: 60px; /* Add margin to create space between heading and categories */
        }

        .category {
            margin-bottom: 20px; /* Add margin between categories */
        }

        .category h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .auction-container {
            overflow-x: auto; /* Enable horizontal scrolling */
            white-space: nowrap; /* Prevent line breaks */

        }

        .auction-item {
            display: inline-block;
            margin-right: 10px; /* Adjust as needed for spacing between items */
            border: 1px solid #bdc3c7; /* Light border color */
            padding: 5px; /* Adjust the padding for smaller product boxes */
            border-radius: 5px;
            width: 160px; /* Set the fixed width for each item */
            height: 230px; /* Set the fixed height for each item */
            background-color: #f5f5f5; /* Set the background color to a light shade */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2); /* Add box shadow for a lifted effect */
        }

        .auction-details {
            text-align: center;
        }

        .auction-details img {
            max-width: 100%;
            height: auto;
            margin-bottom: 5px; /* Adjust the margin for smaller images */
            border-radius: 5px;
            max-height: 90px; /* Set the maximum height for the images */
        }

        .base-price {
            font-weight: bold;
            font-size: 0.8em; /* Adjust the font size for the base price */
            margin: 0; /* Reset margin for tighter spacing */
        }

        .auction-timer {
            font-size: 0.8em; /* Adjust the font size for the auction timer */
            margin: 0; /* Reset margin for tighter spacing */
        }

        .item-description {
            font-size: 0.8em; /* Adjust the font size for the item description */
            max-height: 60px; /* Set the maximum height for the description */
            overflow: hidden; /* Hide overflow content */
            margin: 0; /* Reset margin for tighter spacing */
        }

        /* Adjust the size and color of the "Bid Now" button */
        .btn-bid-now {
            font-size: 0.7em; /* Adjust the font size for the button */
            padding: 5px 10px; /* Adjust padding for smaller button size */
            background-color: #28a745; /* Green color */
            color: white; /* Text color */
        }

        /* Add the new style for the bottom column */
        .bottom-column {
            background-color: #151922; /* Light grey background color */
            padding: 20px; /* Padding for content inside the bottom column */
            border-radius: 5px; /* Optional: Add rounded corners */
            margin-top: 80px; /* Adjust margin as needed */

        }

        .bottom-column h2 {
            color: #FFFFFF; /* Dark text color */
            font-size: 1.5em; /* Adjust the font size for headings */
            margin-bottom: 15px; /* Adjust margin for spacing */
        }

        .bottom-column p {
            color: #FFFFFF;
            font-size: 1em; /* Adjust the font size for paragraphs */
            line-height: 1.0; /* Adjust line height for better readability */
        }
    </style>
</head>
<body>
    <div class="top-column">
        <button>Home</button>
        <button>About us</button>
        <button>Services</button>
        <button>Contact</button>
        <button><a href="../../../login">Login</a></button>
    </div>

    <div class="container">
        <div class="page-heading">
            <span>SMART</span>
            <span class="red">AUCS</span>
        </div>

        <!-- Login button added here -->
        <a href="/dashboard" class="login-button">Dashboard</a>

        <div class="search-bar">
            <input type="text" placeholder="Search...">
        </div>

        <div class="picture-container">
            <img src="{{ url_for('serve_image2', filename='aucspage.jpeg' ) }}" alt="{{ url_for('serve_image2', filename='aucspage.jpeg' ) }}" class="img-fluid">
            <a href="/register" class="register-button">Register</a>
        </div>

        <div class="category-container">
            {% set categories = [] %}
            {% for auction in auctions %}
                {% set category = auction[7] %}
                {% if category not in categories %}
                    {% set _ = categories.append(category) %}
                    <div class="category" id="{{ 'category-' + category }}">
                        <h3>{{ category }}</h3>
                        <div class="auction-container" id="{{ 'auction-container-' + category }}"></div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        <!-- New bottom column added for "About Us" and "Contact Info" -->
        <div class="bottom-column">
            <h2>About Us</h2>
            <p>This is a brief description of our company and what we do. Feel free to add more details here.</p>

            <h2>Contact Info</h2>
            <p>Email: info@smartaucs.com<br>Phone: +1 123 456 7890<br>Address: 123 Main Street, Cityville</p>
        </div>
    </div>

    <!-- Include your JavaScript files if needed -->
    <script>
    // JavaScript code for arranging auctions by category
    {% for auction in auctions %}
        var category = "{{ auction[7] }}";
        var auctionContainer = document.getElementById("auction-container-" + category);

        // Create a new auction item element
        var auctionItem = document.createElement("div");
        auctionItem.className = "auction-item";

        // Add your existing auction details HTML to the auction item
        auctionItem.innerHTML = `
            <div class="auction-details">
                <h2 style="font-size: 1em; margin: 0;">{{ auction[0] }}</h2>
                {% if auction[1] %}
                    <img src="{{ url_for('serve_image1', filename= auction[1]) }}" alt="{{ auction[1] }}" class="img-fluid">
                {% else %}
                    <p class="no-image" style="font-size: 0.8em; margin: 0;">No Image Available</p>
                {% endif %}
                <p class="item-description" style="margin: 0;">{{ auction[2] }}</p>
                <p class="base-price" style="font-size: 0.8em; margin: 0;">Base Price: ${{ auction[3] }}</p>
                <p class="auction-timer" id="timer-{{ auction[6] }}"></p>
                <p style="font-size: 0.8em; margin: 0;">Current Bid: ${{ auction[5] }}</p>
                <a href="{{ url_for('bid', auction_id=auction[6]) }}" class="btn btn-bid-now">Bid Now</a>
            </div>
        `;

        // Append the auction item to the corresponding category container
        auctionContainer.appendChild(auctionItem);
    {% endfor %}
</script>


    <script>
        // JavaScript code for countdown timer
        {% for auction in auctions %}
         updateTimer("{{ auction[6] }}");

// Update the countdown every 1 second
var x = setInterval(function() {
    updateTimer("{{ auction[6] }}");
}, 1000);

function updateTimer(auctionId) {
    var now = new Date().getTime();
    var timezoneOffset = new Date().getTimezoneOffset() * 60 * 1000; // Convert minutes to milliseconds
    var auctionEndTimeString = '{{ auction[4] }}';
    var auctionEndTime = new Date(auctionEndTimeString + ' UTC').getTime() - timezoneOffset;
    var distance = auctionEndTime - now;

    // Calculate remaining time
    var days = Math.floor(distance / (1000 * 60 * 60 * 24));
    var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((distance % (1000 * 60)) / 1000);

    // Display debug information in the console
    console.log("Now:", now);
    console.log("Auction End Time:", auctionEndTime);
    console.log("Distance:", distance);

    // Display the remaining time in the auction-timer element
    var timerElement = document.getElementById("timer-" + auctionId);
    if (distance < 0) {
        clearInterval(x);
        timerElement.innerHTML = "Auction Ended";
    } else {
        timerElement.innerHTML = "Time Left: " + days + "d " + hours + "h " + minutes + "m " + seconds + "s ";
    }
}


        {% endfor %}

    </script>

    <script src="vendor/jquery/jquery-3.2.1.min.js"></script>
    <script src="vendor/bootstrap/js/popper.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
</body>
</html>
